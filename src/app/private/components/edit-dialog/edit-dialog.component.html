<div>
  <h2 mat-dialog-title>{{ "Edit" | translate }}</h2>
  <form [formGroup]="form" (ngSubmit)="save()" class="reportForm px-1">
    <div class="row row-2">
      <mat-form-field>
        <mat-label>{{ "TransactionNumber" | translate }}</mat-label>
        <input
          matInput
          placeholder="Transaction number"
          formControlName="dealId"
        />
        <mat-error
          *ngIf="
            controls.dealId.invalid && (controls.dealId.touched || submitted)
          "
          >{{
            controls.dealId.errors
              | getFirstError : "transactionNumber" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ "TransactionType" | translate }}</mat-label>
        <mat-select formControlName="dealType">
          <mat-option
            *ngFor="let dealType of dealTypes"
            [value]="dealType.value"
          >
            {{ dealType.value | translate }}
          </mat-option>
        </mat-select>
        <mat-error
          *ngIf="
            controls.dealType.invalid &&
            (controls.dealType.touched || submitted)
          "
          >{{
            controls.dealType.errors
              | getFirstError : "dealType" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>
    </div>

    <div class="row row-2">
      <!-- Partner -->
      <mat-form-field>
        <mat-label>{{ "Partner" | translate }}</mat-label>
        <mat-select formControlName="partner">
          <mat-option *ngFor="let partner of partners" [value]="partner.id">
            {{ partner.name }}
          </mat-option>
        </mat-select>
        <mat-error
          *ngIf="
            controls.partner.invalid && (controls.partner.touched || submitted)
          "
          >{{
            controls.partner.errors
              | getFirstError : "partner" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>

      <!-- Participant -->
      <mat-form-field>
        <mat-label>{{ "Participant" | translate }}</mat-label>
        <input
          matInput
          placeholder="Participant"
          formControlName="participant"
        />
        <mat-error
          *ngIf="
            controls.participant.invalid &&
            (controls.participant.touched || submitted)
          "
          >{{
            controls.participant.errors
              | getFirstError : "participant" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>
    </div>

    <div class="row row-1">
      <mat-form-field appearance="fill">
        <mat-label>{{ "DateTime" | translate }}</mat-label>
        <input
          matInput
          [ngxMatDatetimePicker]="dealDatePicker"
          formControlName="dealDate"
        />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matSuffix
          [for]="$any(dealDatePicker)"
        ></mat-datepicker-toggle>
        <ngx-mat-datetime-picker #dealDatePicker></ngx-mat-datetime-picker>
        <mat-error
          *ngIf="
            controls.dealDate.invalid &&
            (controls.dealDate.touched || submitted)
          "
          >{{
            controls.dealDate.errors
              | getFirstError : "dealDate" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>
    </div>

    <div class="row row-3">
      <mat-form-field>
        <mat-label>{{ "CurrencyISOCode" | translate }}</mat-label>
        <mat-select formControlName="isocode">
          <mat-option
            *ngFor="let isocode of isocodes"
            [value]="isocode.value"
            >{{ isocode.viewValue }}</mat-option
          >
        </mat-select>
        <mat-error
          *ngIf="
            controls.isocode.invalid && (controls.isocode.touched || submitted)
          "
          >{{
            controls.isocode.errors
              | getFirstError : "isocode" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ "Volume" | translate }}</mat-label>
        <input matInput formControlName="volume" />
        <mat-error
          *ngIf="
            controls.volume.invalid && (controls.volume.touched || submitted)
          "
          >{{
            controls.volume.errors
              | getFirstError : "volume" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ "Rate" | translate }}</mat-label>
        <input matInput formControlName="rate" />
        <mat-error
          *ngIf="controls.rate.invalid && (controls.rate.touched || submitted)"
          >{{
            controls.rate.errors
              | getFirstError : "rate" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>
    </div>

    <div mat-dialog-actions class="px-0 py-1">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="form.invalid && form.touched"
      >
        {{ "Save" | translate }}
      </button>
      <button mat-button type="button" (click)="dialogRef.close()">
        {{ "Cancel" | translate }}
      </button>
    </div>
  </form>
</div>
