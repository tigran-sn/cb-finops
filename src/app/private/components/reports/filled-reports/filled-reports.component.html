<div class="page">
  <h2 class="page__title fz-2 my-2">{{ "FilledReports" | translate }}</h2>

  <div class="is-flex is-justify-content-space-between my-2">
    <app-filter (filter)="filter($event)"></app-filter>
    <app-create-report-button></app-create-report-button>
  </div>

  <div class="table__page">
    <div class="actionsContainer">
      <button
        *ngIf="!selection.isEmpty()"
        mat-stroked-button color="primary"
        (click)="sendSelectedReports(selection)"
      >
        {{ "SendReports" | translate }}
      </button>
    </div>
    <mat-table mat-table [dataSource]="dataSource">
      <!-- Checkbox Column -->
      <ng-container matColumnDef="select">
        <mat-header-cell *matHeaderCellDef>
          <mat-checkbox
            (change)="$event ? toggleAllRows() : null"
            [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()"
            [aria-label]="checkboxLabel()"
            color="primary"
          >
          </mat-checkbox>
        </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="$event ? selection.toggle(row) : null"
            [checked]="selection.isSelected(row)"
            [aria-label]="checkboxLabel(row)"
            color="primary"
          >
          </mat-checkbox>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="dealId">
        <mat-header-cell *matHeaderCellDef>
          {{ "Id" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.dealId }}
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <!-- matSort -->
      <!-- (matSortChange)="announceSortChange($event)" -->
      <!-- Report name Column -->
      <ng-container matColumnDef="dealType">
        <mat-header-cell *matHeaderCellDef>
          <!-- mat-sort-header
          sortActionDescription="Sort by Report name" -->
          {{ "ReportName" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.dealType | translate }}
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="participant">
        <mat-header-cell *matHeaderCellDef>
          {{ "Participant" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.participant }}
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="partner">
        <mat-header-cell *matHeaderCellDef>
          {{ "Partner" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.partner }}
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="isocode">
        <mat-header-cell *matHeaderCellDef>
          {{ "ISOCode" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.isocode }}
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="volume">
        <mat-header-cell *matHeaderCellDef>
          {{ "Volume" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.volume }}
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="rate">
        <mat-header-cell *matHeaderCellDef>
          {{ "Rate" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.rate }}
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <!-- Date/Time Column -->
      <ng-container matColumnDef="dealDate">
        <mat-header-cell *matHeaderCellDef>
          <!-- mat-sort-header
          sortActionDescription="Sort by Date/Time" -->
          {{ "DateTime" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          {{ element.dealDate | date : "dd/MM/yyyy hh:mm" }}
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="calculationDate">
        <mat-header-cell *matHeaderCellDef>
          {{ "CalculationDate" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.calculationDate | date: 'dd/MM/yyyy' }}
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <mat-header-cell *matHeaderCellDef>
          <!-- mat-sort-header
          sortActionDescription="Sort by status" -->
          {{ "Status" | translate }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="tableRow">
            <div class="tableRow__header">
              {{ element.status | translate }}
            </div>
            <div class="tableRow__icons is-flex">
              <button
                (click)="edit(element)"
                mat-icon-button
                aria-label="Edit report"
              >
                <mat-icon>edit</mat-icon>
              </button>
              <!-- <button
                (click)="downloadXLS(element)"
                mat-icon-button
                aria-label="Download report as XLS"
              >
                <mat-icon>save_alt</mat-icon>
              </button>
              <button
                (click)="downloadPDF(element)"
                mat-icon-button
                aria-label="Download report as PDF"
              >
                <mat-icon>picture_as_pdf</mat-icon>
              </button> -->
            </div>
          </div>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row
        *matRowDef="let row; columns: displayedColumns"
      ></mat-row>
    </mat-table>

    <mat-paginator
      [pageSizeOptions]="[10, 20, 50, 100]"
      showFirstLastButtons
      aria-label="Select page of periodic elements"
    >
    </mat-paginator>
  </div>
</div>
