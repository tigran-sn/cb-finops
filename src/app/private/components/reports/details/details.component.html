<div class="page">
  <h2 class="page__title fz-2 my-2">{{ "NewReport" | translate }}</h2>

  <form [formGroup]="form" class="reportForm">
    <div class="row row-1">
      <mat-form-field>
        <mat-label>{{ "TransactionType" | translate }}</mat-label>
        <mat-select [formControl]="dealType">
          <mat-option
            *ngFor="let dealType of dealTypes"
            [value]="dealType.value"
          >
            {{ dealType.value | translate }}
          </mat-option>
        </mat-select>
        <mat-error
          *ngIf="dealType.invalid && (dealType.touched || submitted)"
          >{{
            dealType.errors
              | getFirstError : "dealType" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>
    </div>

    <div class="row row-2">
      <mat-form-field>
        <mat-label>{{ "Participant" | translate }}</mat-label>
        <input matInput [formControl]="participant" readonly />
        <!--        <mat-select [formControl]="participant">-->
        <!--          <mat-option value="option">Option</mat-option>-->
        <!--        </mat-select>-->
        <mat-error
          *ngIf="participant.invalid && (participant.touched || submitted)"
          >{{
            participant.errors
              | getFirstError : "participant" : validationMessages
              | translate
          }}</mat-error
        >
        <!--      <mat-hint align="end">Here's the dropdown arrow ^</mat-hint>-->
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ "Partner" | translate }}</mat-label>
        <mat-select [formControl]="partner">
          <mat-option *ngFor="let partner of partners" [value]="partner.id">
            {{ partner.name }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="partner.invalid && (partner.touched || submitted)">{{
          partner.errors
            | getFirstError : "partner" : validationMessages
            | translate
        }}</mat-error>
      </mat-form-field>
    </div>

    <div class="row row-1">
      <mat-form-field>
        <mat-label>{{ "DateTime" | translate }}</mat-label>
        <input
          matInput
          [ngxMatDatetimePicker]="dealDatePicker"
          [formControl]="dealDate"
        />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matSuffix
          [for]="$any(dealDatePicker)"
        ></mat-datepicker-toggle>
        <ngx-mat-datetime-picker #dealDatePicker></ngx-mat-datetime-picker>
        <mat-error
          *ngIf="dealDate.invalid && (dealDate.touched || submitted)"
          >{{
            dealDate.errors
              | getFirstError : "dealDate" : validationMessages
              | translate
          }}</mat-error
        >
      </mat-form-field>
    </div>

    <div class="row row-3">
      <mat-form-field>
        <mat-label>{{ "CurrencyISOCode" | translate }}</mat-label>
        <mat-select [formControl]="isocode">
          <mat-option *ngFor="let isocode of isocodes" [value]="isocode.value">
            {{ isocode.viewValue }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="isocode.invalid && (isocode.touched || submitted)">{{
          isocode.errors
            | getFirstError : "isocode" : validationMessages
            | translate
        }}</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ "Volume" | translate }}</mat-label>
        <input matInput [formControl]="volume" />
        <mat-error *ngIf="volume.invalid && (volume.touched || submitted)">{{
          volume.errors
            | getFirstError : "volume" : validationMessages
            | translate
        }}</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ "Rate" | translate }}</mat-label>
        <input matInput [formControl]="rate" />
        <mat-error *ngIf="rate.invalid && (rate.touched || submitted)">{{
          rate.errors | getFirstError : "rate" : validationMessages | translate
        }}</mat-error>
      </mat-form-field>
    </div>

    <!--    <button mat-raised-button color="primary" type="submit">Submit</button>-->
    <div class="reportForm__buttons">
      <button
        [disabled]="(form.invalid && form.touched) || !form.touched"
        mat-raised-button
        color="primary"
        type="button"
        class="mx-1"
        (click)="onRegister()"
      >
        {{ "Save" | translate }}
      </button>
      <button
        [disabled]="(form.invalid && form.touched) || !form.touched"
        mat-raised-button
        color="primary"
        type="button"
        (click)="onSend()"
      >
        {{ "Send" | translate }}
      </button>
    </div>
  </form>
</div>
